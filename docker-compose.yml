version: "2.3"
services:
  notebook:
    image: ldavid/salient-segmentation
    # user: "${UID}:${GID}"
    runtime: nvidia
    build:
      dockerfile: ./config/docker/Dockerfile
      context: .
      args:
        BASE_IMAGE: tensorflow/tensorflow:latest-gpu-jupyter
    ports:
      - "8888:8888"
      - "6006:6006"
    env_file:
      - ./config/docker/.env
    volumes:
      - ./notebooks:/tf/notebooks
      - ./config:/tf/config
      - ./logs:/tf/logs
      - ./src:/tf/code
      - ./data:/tf/data
      - ./data/cached/.cache:/root/.cache
